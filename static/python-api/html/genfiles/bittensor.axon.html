
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>bittensor.axon module &#8212; Bittensor API</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom-css-for-sphinx-book-theme.css?v=43651722" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=365ca57ee442770a23c6"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'genfiles/bittensor.axon';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="bittensor.chain_data module" href="bittensor.chain_data.html" />
    <link rel="prev" title="bittensor.utils.weight_utils module" href="bittensor.utils.weight_utils.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.svg" class="logo__image only-light" alt="Bittensor API - Home"/>
    <script>document.write(`<img src="../_static/logo.svg" class="logo__image only-dark" alt="Bittensor API - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="bittensor.html">bittensor package</a><input checked class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="bittensor.extrinsics.html">bittensor.extrinsics package</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.delegation.html">bittensor.extrinsics.delegation module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.log_utilities.html">bittensor.extrinsics.log_utilities module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.network.html">bittensor.extrinsics.network module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.prometheus.html">bittensor.extrinsics.prometheus module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.registration.html">bittensor.extrinsics.registration module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.root.html">bittensor.extrinsics.root module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.senate.html">bittensor.extrinsics.senate module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.serving.html">bittensor.extrinsics.serving module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.set_weights.html">bittensor.extrinsics.set_weights module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.staking.html">bittensor.extrinsics.staking module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.transfer.html">bittensor.extrinsics.transfer module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.extrinsics.unstaking.html">bittensor.extrinsics.unstaking module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="bittensor.utils.html">bittensor.utils package</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="bittensor.utils.balance.html">bittensor.utils.balance module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.utils.formatting.html">bittensor.utils.formatting module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.utils.networking.html">bittensor.utils.networking module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.utils.registration.html">bittensor.utils.registration module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.utils.stats.html">bittensor.utils.stats module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.utils.test_utils.html">bittensor.utils.test_utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.utils.wallet_utils.html">bittensor.utils.wallet_utils module</a></li>
<li class="toctree-l3"><a class="reference internal" href="bittensor.utils.weight_utils.html">bittensor.utils.weight_utils module</a></li>
</ul>
</li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">bittensor.axon module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.chain_data.html">bittensor.chain_data module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.config.html">bittensor.config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.dendrite.html">bittensor.dendrite module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.errors.html">bittensor.errors module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.keyfile.html">bittensor.keyfile module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.logging.html">bittensor.logging module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.metagraph.html">bittensor.metagraph module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.stream.html">bittensor.stream module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.subtensor.html">bittensor.subtensor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.synapse.html">bittensor.synapse module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.tensor.html">bittensor.tensor module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.threadpool.html">bittensor.threadpool module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.types.html">bittensor.types module</a></li>
<li class="toctree-l2"><a class="reference internal" href="bittensor.wallet.html">bittensor.wallet module</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/genfiles/bittensor.axon.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>bittensor.axon module</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.blacklist"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.blacklist()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.dispatch"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.dispatch()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.postprocess"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.postprocess()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.preprocess"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.preprocess()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.priority"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.priority()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.run"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.run()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.verify"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.verify()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.install_signal_handlers"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.install_signal_handlers()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.is_running"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.is_running</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.run_in_thread"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.run_in_thread()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.should_exit"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.should_exit</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.start"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.start()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.stop"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.stop()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon"><code class="docutils literal notranslate"><span class="pre">axon</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.add_args"><code class="docutils literal notranslate"><span class="pre">axon.add_args()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.attach"><code class="docutils literal notranslate"><span class="pre">axon.attach()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.check_config"><code class="docutils literal notranslate"><span class="pre">axon.check_config()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.config"><code class="docutils literal notranslate"><span class="pre">axon.config()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.default_verify"><code class="docutils literal notranslate"><span class="pre">axon.default_verify()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.help"><code class="docutils literal notranslate"><span class="pre">axon.help()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.info"><code class="docutils literal notranslate"><span class="pre">axon.info()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.serve"><code class="docutils literal notranslate"><span class="pre">axon.serve()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.start"><code class="docutils literal notranslate"><span class="pre">axon.start()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.stop"><code class="docutils literal notranslate"><span class="pre">axon.stop()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.verify_body_integrity"><code class="docutils literal notranslate"><span class="pre">axon.verify_body_integrity()</span></code></a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="module-bittensor.axon">
<span id="bittensor-axon-module"></span><h1>bittensor.axon module<a class="headerlink" href="#module-bittensor.axon" title="Link to this heading">#</a></h1>
<p>Create and init Axon, whcih services Forward and Backward requests from other neurons.</p>
<dl class="py class">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bittensor.axon.</span></span><span class="sig-name descname"><span class="pre">AxonMiddleware</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseHTTPMiddleware</span></code></p>
<p>Class AxonMiddleware handles the entire process of the request to the Axon.
It fills the necessary information into the synapse and manages the logging of messages and errors.
It handles the verification, blacklist checking and running priority functions.
This class also runs the requested function and updates the headers of the response.</p>
<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.blacklist">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">blacklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="bittensor.synapse.html#bittensor.synapse.Synapse" title="bittensor.synapse.Synapse"><span class="pre">Synapse</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.blacklist" title="Link to this definition">#</a></dt>
<dd><p>Check if the request is blacklisted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>synapse</strong> (<a class="reference internal" href="bittensor.synapse.html#bittensor.synapse.Synapse" title="bittensor.synapse.Synapse"><em>Synapse</em></a>) – The synapse instance representing the request.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – If the request is blacklisted.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.dispatch">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dispatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">starlette.requests.Request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call_next</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">starlette.middleware.base.RequestResponseEndpoint</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">starlette.requests.Request</span></span></span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.dispatch" title="Link to this definition">#</a></dt>
<dd><p>Processes incoming requests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong><strong>(</strong><strong>starlette</strong> – Request): The incoming request.</p></li>
<li><p><strong>call_next</strong><strong>(</strong><strong>starlette</strong> – RequestResponseEndpoint): The function to call after processing the request.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Response): The processed request.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>response (starlette</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.postprocess">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">postprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="bittensor.synapse.html#bittensor.synapse.Synapse" title="bittensor.synapse.Synapse"><span class="pre">Synapse</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">starlette.responses.Response</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">starlette.responses.Response</span></span></span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.postprocess" title="Link to this definition">#</a></dt>
<dd><p>Perform post-processing operations on the request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>synapse</strong> (<em>bittensor.Synapse</em>) – The synapse instance representing the request.</p></li>
<li><p><strong>response</strong> (<em>starlet Response</em>) – The response from the requested function.</p></li>
<li><p><strong>start_time</strong> (<em>float</em>) – The start time of request processing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The processed request with updated headers.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>response (starlet Response)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.preprocess">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">preprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">starlette.requests.Request</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="bittensor.synapse.html#bittensor.synapse.Synapse" title="bittensor.synapse.Synapse"><span class="pre">Synapse</span></a></span></span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.preprocess" title="Link to this definition">#</a></dt>
<dd><p>Perform preprocess operations for the request and generate the synapse state object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>synapse</strong> (<a class="reference internal" href="bittensor.synapse.html#bittensor.synapse.Synapse" title="bittensor.synapse.Synapse"><em>Synapse</em></a>) – The synapse instance representing the request.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.priority">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">priority</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="bittensor.synapse.html#bittensor.synapse.Synapse" title="bittensor.synapse.Synapse"><span class="pre">Synapse</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.priority" title="Link to this definition">#</a></dt>
<dd><p>Execute the priority function for the request.</p>
<p>A priority function is a function that determines the priority or urgency of processing the request compared to other requests.
:param synapse: The synapse instance representing the request.
:type synapse: bittensor.Synapse</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Exception</strong> – If the priority function times out.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.run">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="bittensor.synapse.html#bittensor.synapse.Synapse" title="bittensor.synapse.Synapse"><span class="pre">Synapse</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">call_next</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">starlette.middleware.base.RequestResponseEndpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">starlette.requests.Request</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">starlette.responses.Response</span></span></span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.run" title="Link to this definition">#</a></dt>
<dd><p>Execute the requested function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>synapse</strong> – ( bittensor.Synapse ): call state.</p></li>
<li><p><strong>call_next</strong> – ( starlet RequestResponseEndpoint ): The function to call after processing the request.</p></li>
<li><p><strong>request</strong> – ( starlet Request ): The incoming request.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The processed request.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>response (starlet Response)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.verify">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">verify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="bittensor.synapse.html#bittensor.synapse.Synapse" title="bittensor.synapse.Synapse"><span class="pre">Synapse</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.verify" title="Link to this definition">#</a></dt>
<dd><p>Verify the request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>synapse</strong> (<em>bittensor.Synapse</em>) – The synapse instance representing the request.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – If verification fails.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bittensor.axon.</span></span><span class="sig-name descname"><span class="pre">FastAPIThreadedServer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.install_signal_handlers">
<span class="sig-name descname"><span class="pre">install_signal_handlers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.install_signal_handlers" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.is_running">
<span class="sig-name descname"><span class="pre">is_running</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.is_running" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.run_in_thread">
<span class="sig-name descname"><span class="pre">run_in_thread</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.run_in_thread" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.should_exit">
<span class="sig-name descname"><span class="pre">should_exit</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.should_exit" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.start" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.stop" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bittensor.axon.axon">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bittensor.axon.</span></span><span class="sig-name descname"><span class="pre">axon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wallet</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="bittensor.wallet.html#bittensor.wallet.wallet" title="bittensor.wallet.wallet"><span class="pre">wallet</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="bittensor.config.html#bittensor.config.config" title="bittensor.config.config"><span class="pre">config</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">external_ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">external_port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_workers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The <cite>axon</cite> class is an object that forms the core part of bittensor’s serving synapses.
The class relies heavily on an underlying FastAPI router, which is utilized to create endpoints for different message types.
Methods in this class are equipped to deal with incoming requests from other scenarios in the network and serve as the server face for a neuron.</p>
<p>It accepts multiple arguments, like wallet, configuration parameters, ip address, server binding port, external ip, external port and max workers.
Key methods involve managing and operating the FastAPI application router, including the attachment and operation of endpoints.
The <cite>axon</cite> class offers flexibility to specify custom rules to forward, blacklist, prioritize and verify incoming requests against custom functions.</p>
<p>The class also encapsulates methods to add command-line arguments for user-friendly interaction with the program, and supports the handling of these arguments,
to define the behavior of the axon object.</p>
<p>Internal mechanisms manage a thread pool to support concurrent requests handling, using defined priority levels.</p>
<p>### Example usage:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>python
import bittensor</p>
<dl class="simple">
<dt>class MySyanpse( bittensor.Synapse ):</dt><dd><p>input: int = 1
output: int = None</p>
</dd>
</dl>
<p># Define a custom request forwarding function
def forward( synapse: MySyanpse ) -&gt; MySyanpse:</p>
<blockquote>
<div><p># Apply custom logic to synapse and return it
synapse.output = 2
return synapse</p>
</div></blockquote>
<p># Define a custom request verification function
def verify_my_synapse( synapse: MySyanpse ):</p>
<blockquote>
<div><p># Apply custom verification logic to synapse
# Optionally raise Exception</p>
</div></blockquote>
<p># Define a custom request blacklist fucntion
def blacklist_my_synapse( synapse: MySyanpse ) -&gt; bool:</p>
<blockquote>
<div><p># Apply custom blacklist
# return False ( if non blacklisted ) or True ( if blacklisted )</p>
</div></blockquote>
<p># Define a custom request priority fucntion
def prioritize_my_synape( synapse: MySyanpse ) -&gt; float:</p>
<blockquote>
<div><p># Apply custom priority
return 1.0</p>
</div></blockquote>
<p># Initialize Axon object with a custom configuration
my_axon = bittensor.axon(config=my_config, wallet=my_wallet, port=9090, ip=”192.0.2.0”, external_ip=”203.0.113.0”, external_port=7070)</p>
<p># Attach the endpoint with the specified verification and forwarding functions
my_axon.attach(</p>
<blockquote>
<div><p>forward_fn = forward_my_synapse,
verify_fn = verify_my_synapse,
blacklist_fn = blacklist_my_synapse,
priority_fn = prioritize_my_synape</p>
</div></blockquote>
<dl class="simple">
<dt>).attach(</dt><dd><p>forward_fn = forward_my_synapse_2,
verify_fn = verify_my_synapse_2,
blacklist_fn = blacklist_my_synapse_2,
priority_fn = prioritize_my_synape_2</p>
</dd>
<dt>).serve(</dt><dd><p>netuid = …
subtensor = …</p>
</dd>
</dl>
<p>).start()
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.add_args">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ArgumentParser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.add_args" title="Link to this definition">#</a></dt>
<dd><p>Adds AxonServer-specific command-line arguments to the argument parser.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parser</strong> (<em>argparse.ArgumentParser</em>) – Argument parser to which the arguments will be added.</p></li>
<li><p><strong>prefix</strong> (<em>str</em><em>, </em><em>optional</em>) – Prefix to add to the argument names. Defaults to None.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Environment variables are used to define default values for the arguments.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.attach">
<span class="sig-name descname"><span class="pre">attach</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forward_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blacklist_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bittensor.axon.axon" title="bittensor.axon.axon"><span class="pre">axon</span></a></span></span><a class="headerlink" href="#bittensor.axon.axon.attach" title="Link to this definition">#</a></dt>
<dd><p>Registers an API endpoint to the FastAPI application router.
It uses the name of the first argument of the ‘forward_fn’ function as the endpoint name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>forward_fn</strong> (<em>Callable</em>) – Function to be called when the API endpoint is accessed.
It should have at least one argument.</p></li>
<li><p><strong>blacklist_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Function to filter out undesired requests. It should take the same arguments
as ‘forward_fn’ and return a boolean value. Defaults to None, meaning no blacklist filter will be used.</p></li>
<li><p><strong>priority_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Function to rank requests based on their priority. It should take the same arguments
as ‘forward_fn’ and return a numerical value representing the request’s priority.
Defaults to None, meaning no priority sorting will be applied.</p></li>
<li><p><strong>verify_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Function to verify requests. It should take the same arguments as ‘forward_fn’ and return
a boolean value. If None, ‘self.default_verify’ function will be used.</p></li>
</ul>
</dd>
</dl>
<p>Note: ‘forward_fn’, ‘blacklist_fn’, ‘priority_fn’, and ‘verify_fn’ should be designed to receive the same parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>AssertionError</strong> – If ‘forward_fn’ does not have the signature: forward( synapse: YourSynapse ) -&gt; synapse:</p></li>
<li><p><strong>AssertionError</strong> – If ‘blacklist_fn’ does not have the signature: blacklist( synapse: YourSynapse ) -&gt; bool</p></li>
<li><p><strong>AssertionError</strong> – If ‘priority_fn’ does not have the signature: priority( synapse: YourSynapse ) -&gt; float</p></li>
<li><p><strong>AssertionError</strong> – If ‘verify_fn’ does not have the signature: verify( synapse: YourSynapse ) -&gt; None</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns the instance of the AxonServer class for potential method chaining.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>self</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.check_config">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">check_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="bittensor.config.html#bittensor.config.config" title="bittensor.config.config"><span class="pre">config</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.check_config" title="Link to this definition">#</a></dt>
<dd><p>This method checks the configuration for the axon’s port and wallet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<em>bittensor.config</em>) – The config object holding axon settings.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>AssertionError</strong> – If the axon or external ports are not in range [1024, 65535]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.config">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="bittensor.config.html#bittensor.config.config" title="bittensor.config.config"><span class="pre">config</span></a></span></span><a class="headerlink" href="#bittensor.axon.axon.config" title="Link to this definition">#</a></dt>
<dd><p>Parses command-line arguments to form a bittensor configuration object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Configuration object with settings from command-line arguments.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bittensor.config</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.default_verify">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_verify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="bittensor.synapse.html#bittensor.synapse.Synapse" title="bittensor.synapse.Synapse"><span class="pre">Synapse</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.default_verify" title="Link to this definition">#</a></dt>
<dd><p>This method is used to verify the authenticity of a received message using a digital signature.
It ensures that the message was not tampered with and was sent by the expected sender.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>synapse</strong> – bittensor.Synapse
bittensor request synapse.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>Exception</strong> – If the receiver_hotkey doesn’t match with self.receiver_hotkey.</p></li>
<li><p><strong>Exception</strong> – If the nonce is not larger than the previous nonce for the same endpoint key.</p></li>
<li><p><strong>Exception</strong> – If the signature verification fails.</p></li>
</ul>
</dd>
</dl>
<p>After successful verification, the nonce for the given endpoint key is updated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The verification process assumes the use of an asymmetric encryption algorithm,
where the sender signs the message with their private key and the receiver verifies the signature using the sender’s public key.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.help">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">help</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.help" title="Link to this definition">#</a></dt>
<dd><p>Prints the help text (list of command-line arguments and their descriptions) to stdout.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.info">
<span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="bittensor.chain_data.html#bittensor.chain_data.AxonInfo" title="bittensor.chain_data.AxonInfo"><span class="pre">AxonInfo</span></a></span></span><a class="headerlink" href="#bittensor.axon.axon.info" title="Link to this definition">#</a></dt>
<dd><p>Returns the axon info object associated with this axon.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.serve">
<span class="sig-name descname"><span class="pre">serve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">netuid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtensor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="bittensor.subtensor.html#bittensor.subtensor.subtensor" title="bittensor.subtensor.subtensor"><span class="pre">subtensor</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bittensor.axon.axon" title="bittensor.axon.axon"><span class="pre">axon</span></a></span></span><a class="headerlink" href="#bittensor.axon.axon.serve" title="Link to this definition">#</a></dt>
<dd><p>Serves the axon on the passed subtensor connection using the axon wallet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>netuid</strong> – int
The subnet uid to register on.</p></li>
<li><p><strong>subtensor</strong> – Optional[ bittensor.Subtensor ]
The subtensor connection to use for serving.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The served Axon instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bittensor.axon</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bittensor.axon.axon" title="bittensor.axon.axon"><span class="pre">axon</span></a></span></span><a class="headerlink" href="#bittensor.axon.axon.start" title="Link to this definition">#</a></dt>
<dd><p>Starts the Axon server’s GRPC server thread and marks the Axon as started.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The started Axon instance.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bittensor.axon</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#bittensor.axon.axon" title="bittensor.axon.axon"><span class="pre">axon</span></a></span></span><a class="headerlink" href="#bittensor.axon.axon.stop" title="Link to this definition">#</a></dt>
<dd><p>Stops the Axon server’s GRPC server thread and marks the Axon as stopped.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The stopped Axon instance.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bittensor.axon</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.verify_body_integrity">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">verify_body_integrity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">starlette.requests.Request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.verify_body_integrity" title="Link to this definition">#</a></dt>
<dd><p>Asynchronously verifies the integrity of the body of a request by comparing the hash of required fields
with the corresponding hashes provided in the request headers. This method is critical for ensuring
that the incoming request payload has not been altered or tampered with during transmission, establishing
a level of trust and security between the sender and receiver in the network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> (<em>Request</em>) – The incoming FastAPI request object containing both headers and the request body.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>Returns the parsed body of the request as a dictionary if all the hash comparisons match,</dt><dd><p>indicating that the body is intact and has not been tampered with.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>JSONResponse</strong> – Raises a JSONResponse with a 400 status code if any of the hash comparisons fail,
    indicating a potential integrity issue with the incoming request payload.
    The response includes the detailed error message specifying which field has a hash mismatch.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Assuming this method is set as a dependency in a route:</p>
<p>&#64;app.post(“/some_endpoint”)
async def some_endpoint(body_dict: dict = Depends(verify_body_integrity)):</p>
<blockquote>
<div><p># body_dict is the parsed body of the request and is available for use in the route function.
# The function only executes if the body integrity verification is successful.
…</p>
</div></blockquote>
</dd></dl>

</dd></dl>

</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="bittensor.utils.weight_utils.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">bittensor.utils.weight_utils module</p>
      </div>
    </a>
    <a class="right-next"
       href="bittensor.chain_data.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">bittensor.chain_data module</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.blacklist"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.blacklist()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.dispatch"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.dispatch()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.postprocess"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.postprocess()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.preprocess"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.preprocess()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.priority"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.priority()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.run"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.run()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.verify"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.verify()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.install_signal_handlers"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.install_signal_handlers()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.is_running"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.is_running</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.run_in_thread"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.run_in_thread()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.should_exit"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.should_exit</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.start"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.start()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.stop"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.stop()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon"><code class="docutils literal notranslate"><span class="pre">axon</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.add_args"><code class="docutils literal notranslate"><span class="pre">axon.add_args()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.attach"><code class="docutils literal notranslate"><span class="pre">axon.attach()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.check_config"><code class="docutils literal notranslate"><span class="pre">axon.check_config()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.config"><code class="docutils literal notranslate"><span class="pre">axon.config()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.default_verify"><code class="docutils literal notranslate"><span class="pre">axon.default_verify()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.help"><code class="docutils literal notranslate"><span class="pre">axon.help()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.info"><code class="docutils literal notranslate"><span class="pre">axon.info()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.serve"><code class="docutils literal notranslate"><span class="pre">axon.serve()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.start"><code class="docutils literal notranslate"><span class="pre">axon.start()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.stop"><code class="docutils literal notranslate"><span class="pre">axon.stop()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.verify_body_integrity"><code class="docutils literal notranslate"><span class="pre">axon.verify_body_integrity()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Bittensor
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, Bittensor.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>